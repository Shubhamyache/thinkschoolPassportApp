<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment Management - Passport Application Admin</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
      .logo {
        width: 100px;
        height: 100px;
      }
      .header-message {
        font-size: 1.2rem;
        font-weight: bold;
        color: #0056b3;
      }
    </style>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Header Section -->
    <div class="container-fluid mt-3">
      <div class="d-flex align-items-start">
        <img src="passportlogo.jpeg" alt="Logo" class="logo mr-3" />
        <div class="header-message">
          Passport Seva<br />
          PSP Division<br />
          Ministry of External Affairs, Government of India
        </div>
      </div>
    </div>

    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mt-3">
      <a class="navbar-brand" href="index.html">Passport Seva Admin</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="user_management.html">User Management</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="feedback_management.html"
              >Feedback Management</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="payment_management.html"
              >Payment Management</a
            >
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Search"
            aria-label="Search"
          />
          <button class="btn btn-outline-light my-2 my-sm-0" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </form>
      </div>
    </nav>

    <div class="container mt-4">
      <h1 class="text-center text-primary mb-4">Payment Management</h1>

      <!-- Payment List -->
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title">List of Payments</h2>
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead class="thead-dark">
                <tr>
                  <th>Username</th>
                  <th>Payment Status</th>
                  <th>Amount Paid</th>
                </tr>
              </thead>
              <tbody id="payment-list">
                <!-- Payment list rows will be dynamically added here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Section -->
    <footer class="bg-primary text-white text-center mt-auto">
      <div class="container">
        <p>
          Connect with us on:
          <a href="https://www.facebook.com" class="text-white">Facebook</a> |
          <a href="https://www.Twitter.com" class="text-white">Twitter</a> |
          <a href="https://www.Instagram.com" class="text-white">Instagram</a>
        </p>
        <p>
          Contact Us: <a href="contact.html" class="text-white">Contact Us</a>
        </p>
        <p>Customer Care Helpline: 1800-123-456</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Function to retrieve payment details from localStorage
        function getPaymentsFromLocalStorage() {
          return JSON.parse(localStorage.getItem("passportPayments")) || {};
        }

        // Function to display payment details in the table
        function displayPayments(payments) {
          const paymentListTable = document.getElementById("payment-list");

          // Clear existing rows
          paymentListTable.innerHTML = "";

          // Iterate through payments and display them in the table
          for (const username in payments) {
            if (payments.hasOwnProperty(username)) {
              const paymentStatus = payments[username].payment_status;
              const amountPaid = payments[username].amount_paid;

              const row = document.createElement("tr");
              row.innerHTML = `
              <td>${username}</td>
              <td>${paymentStatus}</td>
              <td>${amountPaid}</td>
            `;
              paymentListTable.appendChild(row);
            }
          }
        }

        // Initialize payment list display
        const payments = getPaymentsFromLocalStorage();
        displayPayments(payments);
      });
    </script>
  </body>
</html>
